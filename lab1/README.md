# Лабораторная работа 1
**Название:** Разработка драйверов символьных устройств

**Цель работы:** Получить знания и навыки разработки драйверов символьных устройств для операционной системы Linux.

## Описание функциональности драйвера
При записи текста в файл символьного устройства должен осуществляться подсчет введенных символов. Последовательность полученных результатов (количество символов) с момента загрузки модуля ядра должна выводиться при чтении созданного файла `/proc/var1` в консоль пользователя. При чтении из файла символьного устройства в кольцевой буфер ядра должен осуществляться вывод тех же данных, которые выводятся при чтении файла `/proc/var1`.

## Инструкция по сборке
Для сборки драйвера выполнить:
```bash
make
```

## Инструкция пользователя
После успешной сборки загрузить полученный модуль:
```bash
insmod lab1.ko
```
Проверить, что драйвер загрузился без ошибок:
```bash
dmesg | tail -1
```
В выводе должно быть подобное:
```
lab1: successfully started: device=var1, major=243, proc=var1
```
Для выгрузки драйвера выполнить:
```bash
rmmod lab1
```
Для проверки успешной выгрузке драйвера можно проверить кольцевой буфер ядра, как это делалось
выше, в выводе должно быть подобное:
```
lab1: successfully release all resources
```

## Примеры использования
Запишем две строки в файл устройства:
```sh
echo "hi" > /dev/var1
echo "привет" > /dev/var1
```
Прочитаем содердимое файла `/proc/var1`:
```sh
3
7
```
Можно заметить, что к реальной длине строки прибавляется 1, это происходит из-за символа
новой строки в конце. Теперь прочитаем содержимое символьного устройства `/dev/var1`, после проверим содержимое кольцевого буфера ядра:
```sh
lab1: 0: result: 3
lab1: 1: result: 7
```
Как можно заметить вывод совпадает с результатами при чтении файла `/proc/var1`
